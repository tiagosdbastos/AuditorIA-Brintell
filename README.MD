# Auditor-IA

Um sistema de an√°lise preliminar de editais de licita√ß√£o, alimentado por um sistema multiagente com IA generativa, para auxiliar auditores de Tribunais de Contas (TCE).

### Links Vivos

  * **Frontend (Vercel):** `https://auditor-ia-brintell.vercel.app/`
  * **Backend (Render):** `https://auditoria-brintell.onrender.com/docs`

-----

## 1\. Vis√£o Geral do Projeto üéØ

 O **Auditor-IA** automatiza a an√°lise preliminar de editais de licita√ß√£o em PDF, aumentando a efici√™ncia e a precis√£o dos auditores.

O sistema funciona da seguinte forma:

1.  O auditor faz o upload de um edital em PDF.
2.  Um sistema orquestrado de 5 agentes de IA entra em a√ß√£o.
3.  Ao final, o sistema gera um Relat√≥rio de An√°lise Preliminar contendo:
      * Resumo dos pontos-chave do edital.
      * Legisla√ß√£o aplic√°vel ao caso.
      * Jurisprud√™ncia relevante (buscada em bases de dados p√∫blicas).
      * Identifica√ß√£o de cl√°usulas de risco ou pontos cr√≠ticos.

## 2\. Arquitetura e Fluxo de Dados ‚öôÔ∏è

O projeto √© dividido em duas aplica√ß√µes principais: um backend em FastAPI (Python) e um frontend em React (Vite).

### Fluxo dos Agentes (Backend)

O cora√ß√£o do sistema √© um fluxo orquestrado (em `backend/src/auditoria_brintell/main.py`) que coordena 5 agentes especializados:

  * **Agente 1: Analista de Documentos**

      * Usa `PyMuPDF` (`fitz`) para extrair o texto completo do PDF enviado.
      * Usa a IA (Gemini) para ler a primeira p√°gina e extrair um resumo estruturado (Objeto, Valor, Modalidade, etc.).
      * Localiza e extrai o texto de se√ß√µes-chave do edital (Objeto, Participa√ß√£o, Apresenta√ß√£o da Proposta, etc.).

  * **Agente 2: Pesquisador de Legisla√ß√£o**

      * Recebe o resumo do Agente 1.
      * Usa a IA (Gemini) para identificar de 3 a 5 artigos principais da Lei n¬∫ 14.133/2021 que s√£o relevantes para aquele edital.

  * **Agente 3: Pesquisador de Jurisprud√™ncia**

      * Recebe o resumo do Agente 1.
      * Usa a IA (Gemini) para gerar uma query de busca CQL (Contextual Query Language) otimizada.
      * Faz uma chamada `requests` √† API p√∫blica SRU do **LexML**.
      * Reporta os resultados encontrados (ou informa se n√£o encontrou nada).

  * **Agente 4: Verificador de Conformidade**

      * √â o agente principal. Recebe os dados de todos os agentes anteriores (se√ß√µes do edital, legisla√ß√£o, jurisprud√™ncia).
      * Usa a IA (Gemini) com um *prompt* robusto para fazer uma an√°lise cr√≠tica, identificando de 3 a 5 pontos de aten√ß√£o, riscos ou potenciais n√£o conformidades.

  * **Agente 5: Sintetizador de Relat√≥rio**

      * Compila todas as sa√≠das (do Agente 1, 2, 3 e 4) num √∫nico relat√≥rio final formatado em **Markdown**.

### Frontend (React)

  * Uma interface limpa (criada com Vite) que permite o upload do ficheiro PDF.
  * Faz uma chamada `fetch` ao endpoint `/analisar-edital/` do backend, enviando o ficheiro.
  * Recebe o JSON `{ "relatorio_final": "..." }`.
  * Usa a biblioteca `react-markdown` para renderizar (desenhar) a string Markdown formatada de forma leg√≠vel para o auditor.

-----

## 3\. Stack de Tecnologias üõ†Ô∏è

| √Årea | Tecnologia | Motivo |
| :--- | :--- | :--- |
| **Frontend** | React (com Vite) | Interface de utilizador moderna e reativa. |
| | `react-markdown` | Renderizar o relat√≥rio final formatado. |
| **Backend** | Python 3 | Linguagem robusta para IA e servi√ßos web. |
| | FastAPI | Framework web moderno e de alta performance para criar a API. |
| | Uvicorn | Servidor ASGI que "serve" a aplica√ß√£o FastAPI. |
| **Intelig√™ncia Artificial**| Google Gemini | Modelo de IA generativa (via `langchain-google-genai`) usado por todos os agentes. |
| **Processamento de Dados**| PyMuPDF (`fitz`)| Extra√ß√£o de texto de alta performance de ficheiros PDF. |
| | LexML (API) | Fonte de dados para jurisprud√™ncia. |
| **Hospedagem** | Vercel | Plataforma otimizada para "deploy" cont√≠nuo de aplica√ß√µes frontend (React). |
| | Render | Plataforma de PaaS para "deploy" de servi√ßos web (Python/FastAPI). |

-----

## 4\. Como Rodar Localmente üñ•Ô∏è

Para executar o projeto na sua m√°quina, precisar√° de dois terminais.

### Pr√©-requisitos

  * Node.js (para o frontend)
  * Python 3.10+ (para o backend)
  * Uma chave de API da Google AI (para o Gemini)

### 1\. Clonar o Reposit√≥rio

```bash
git clone https://github.com/tiagosdbastos/AuditorIA-Brintell.git
cd AuditorIA-Brintell
```

### 2\. Configurar o Backend (Terminal 1)

1.  **Navegue at√© √† pasta do backend:**

    ```bash
    cd backend
    ```

2.  **Crie e ative um ambiente virtual:**

    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```

    *(No Windows, use: `venv\Scripts\activate`)*

3.  **Crie o ficheiro `.env`:**
    Crie um ficheiro chamado `.env` dentro da pasta `backend` e adicione a sua chave da Google:

    ```
    GOOGLE_API_KEY=AIzaSy... (a sua chave secreta)
    ```

4.  **Instale as depend√™ncias Python:**
    (Certifique-se que o `backend/requirements.txt` est√° atualizado)

    ```bash
    pip install -r requirements.txt
    ```

5.  **Inicie o servidor FastAPI:**

    ```bash
    python api.py
    ```

    O backend estar√° a rodar em `http://localhost:8001` (ou na porta que definiu no `api.py`).

### 3\. Configurar o Frontend (Terminal 2)

1.  **Abra um *novo* terminal.**

2.  **Navegue at√© √† pasta do frontend:**

    ```bash
    cd frontend
    ```

3.  **Instale as depend√™ncias Node:**

    ```bash
    npm install
    ```

4.  **Inicie o servidor de desenvolvimento (Vite):**

    ```bash
    npm run dev
    ```

    O frontend estar√° a rodar em `http://localhost:5173` (ou numa porta similar).

### 4\. (Opcional) Configura√ß√£o de Proxy Corporativo

Se estiver numa rede corporativa, poder√° precisar de configurar o proxy para o `pip`, `npm` e para as vari√°veis de ambiente (`HTTP_PROXY`, `HTTPS_PROXY`) antes de executar os comandos de instala√ß√£o e de arranque.

-----

## 5\. Processo de Deploy (Produ√ß√£o) ‚òÅÔ∏è

Este projeto est√° configurado para "deploy" cont√≠nuo (CI/CD) a partir da *branch* `main`.

### Backend (Render)

  * **Servi√ßo:** Web Service
  * **Root Directory:** `backend`
  * **Build Command:** `pip install -r requirements.txt`
  * **Start Command:** `uvicorn api:app --host 0.0.0.0 --port $PORT`
  * **Vari√°veis de Ambiente:** √â **obrigat√≥rio** adicionar a `GOOGLE_API_KEY` no painel "Environment" do Render.

### Frontend (Vercel)

  * **Root Directory:** `frontend`
  * **Build/Start Commands:** O Vercel deteta automaticamente que √© um projeto Vite/React.
